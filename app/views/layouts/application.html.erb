<!DOCTYPE html>
<html>
  <head>
    <title>ShareGpt</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= include_gon %>
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/agate.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="#">ShareGPT</a></li>
          <li><%= link_to "新規作成", new_user_chat_path %></li>
          <li><%= link_to "新規一覧", user_rooms_path %></li>
          <li><%= link_to "最近のchat", user_chats_path %></li>
        </ul>
      </nav>
      <div class="flash_alert_zone flash_zone">
        <%= content_tag(:spin, flash.alert, class:"alert") if flash.alert%>
      </div>
      <%= render "shared/error_message", model: @model%>
    </header>
    <%= yield %>
  </body>
</html>
<%= javascript_pack_tag "layout/application" %>
<script>
$('.like_button').on('click', function() {
    $(this).children('span').text(Number($(this).children('span').text())+1)
    $(this).off();
});
$(function() {
    $('.text').each(function(){
        var txt = $(this).html();
        txt = txt.replace(/```\n/,'<pre><code>\n')
        txt = txt.replace(/\n```/,'\n\n</pre></code>')
        $(this).html(
            txt
        );
    });
});
$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
</script>